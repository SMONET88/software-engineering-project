plugins {
    id 'application'
    id 'java'
}

group = 'org.example'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    implementation 'com.googlecode.json-simple:json-simple:1.1.1'
    implementation 'org.json:json:20230227'
}

application {
    mainClass = 'gettingdata.Main'
}

// Source files are in the gettingdata/ folder (non-standard layout)
sourceSets {
    main {
        java {
            // Sources are at the project root (Main.java, Methods.java) and declare
            // `package gettingdata;` at the top. Use the project root as source dir.
            srcDirs = ['.']
        }
    }
}

// Add a simple JavaExec task to run the embedded HTTP server for Vite to call
tasks.register('runServer', JavaExec) {
    group = 'application'
    description = 'Run the simple HTTP server that exposes /scores'
    classpath = sourceSets.main.runtimeClasspath
    mainClass.set('gettingdata.SimpleServer')
}
